###############################################################################
## Basic Relay Settings
###############################################################################

# Run Tor only as a relay server (no local SOCKS proxy)
SocksPort 0
ControlSocket 0

# Data directory for storing relay keys and state
DataDirectory /var/lib/tor

###############################################################################
## Logging Configuration
###############################################################################

# Log to stdout (useful for Docker logs)
Log notice stdout

###############################################################################
## Relay Configuration
###############################################################################

# ORPort - Onion Router Port for incoming Tor connections
# This is the main port for relay traffic
ORPort 0.0.0.0:9001
# optional: set fixed IPv6 address to avoid mismatches
ORPort [<IPv6 address>]:9001

# Directory Port - Serve directory information to other Tor clients
# Helps distribute network information
DirPort 0.0.0.0:9030

# Relay nickname - must be unique and alphanumeric
Nickname tor-relay

# Contact information - allows Tor Project to contact you about issues
# Format: [PGP Key] Name <email>
ContactInfo tor-relay <tor@example.com>

###############################################################################
## Bandwidth Configuration
###############################################################################

# Bandwidth limits for relay traffic
# Your own traffic through Tor (if any) is not counted against these limits
# Units: KB, MB, GB (binary prefixes: 1 MB = 1024 KB)

# Sustained bandwidth rate
RelayBandwidthRate 5 MB

# Burst bandwidth (short-term maximum)
RelayBandwidthBurst 8 MB

# Upper bound for how much memory Tor is willing to allocate
MaxMemInQueues 1 GB

# Optional: Accounting limits to cap total monthly bandwidth
# Useful if you have bandwidth caps from your ISP
# Note: This applies separately to sent and received bytes
#AccountingMax 50 GB
#AccountingStart day 00:00
# Or start on specific day of month:
#AccountingStart month 3 15:00

###############################################################################
## Relay Family Configuration
###############################################################################

# MyFamily - Declare other relays you operate
# This prevents Tor clients from using multiple relays from the same
# operator in a single circuit, improving anonymity
# List all relay fingerprints you control (comma-separated)
# MyFamily CD1D....

###############################################################################
## Exit Policy Configuration
###############################################################################

# ExitRelay 0 - This relay will NOT be used as an exit node
# This is a middle/guard relay only, which is safer to operate
# Exit relays can receive abuse complaints and legal notices
ExitRelay 0

# Explicit exit policy (redundant with ExitRelay 0, but good practice)
ExitPolicy reject *:*
ExitPolicy reject6 *:*

###############################################################################
## Metrics Configuration (for healthcheck)
###############################################################################
MetricsPort 127.0.0.1:9120
MetricsPortPolicy accept 127.0.0.1